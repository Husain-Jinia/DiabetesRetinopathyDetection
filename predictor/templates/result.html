{% extends 'base.html' %}
{% block content %}
{%if user.is_authenticated %}
<div class="container-fluid">
    <div class="text_underline" style="color:white;text-align:center; margin-bottom: 5rem; margin-top:2rem;">
        <h1>YOUR RESULTS</h1>
    </div>
    <hr>
    <div class="d-flex" style="flex-direction:row; justify-content:space-around">
        <div>
            <table class="table-list" style="border: 1px solid black; background-color:#C8C8C8">
                <thead class="sticky-thead mx-4" style="border: 1px solid black;background-color:#E8E8E8">
                    <tr>
                        <th colspan="" class="" style="border: 1px solid black;"> FACTORS</th>
                        <th colspan="" class="align-center" style="border: 1px solid black;"> RESPONSE </th>
                    </tr>
                </thead>
                <tbody class="mx-4" style="border: 1px solid black;" >
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Pregnancies</strong>
                        </td>
                        <td class="align-center"> {{values.pregnancies}}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Glucose</strong>
                        </td>
                        <td class="align-center"> {{values.glucose}}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Blood pressure</strong>
                        </td>
                        <td class="align-center">{{values.blood_pressure}} </td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Skin thickness</strong>
                        </td>
                        <td class="align-center">{{values.skin_thickness}} </td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Insulin</strong>
                        </td>
                        <td class="align-center">{{values.insulin}} </td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Body mass index</strong>
                        </td>
                        <td class="align-center"> {{values.BMI}}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Diabetes Prediction function</strong>
                        </td>
                        <td class="align-center">{{values.DPF}} </td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td class="" style="border: 1px solid black;"><strong>Age</strong>
                        </td>
                        <td class="align-center"> {{values.age}}</td>
                    </tr>
        
                </tbody>
                <tr>
                    <th colspan="" class="" style="border: 1px solid black; "> RESULTS</th>
                    {% if values.result == "NEGATIVE" %}
                    <th colspan="" class="align-center" style="color:red;"> {{values.result}} </th>
                    {% else %}
                    <th colspan="" class="align-center" style="color:green;"> {{values.result}} </th>
                    {% endif %}
                    
                </tr>
            </table>
            <button onclick="generationFunc()" class="btn btn-outline-dark  my-3"><a href="{% url 'result_pdf' values.pk %}" style="text-decoration:none;color:white"> Generate pdf</a></button>
        </div>
        <div class="my-3 hide">
            <div class="my-4" style="color: #E8E8E8">
                <h3>Basic diabetes symptoms</h3>
                <div class="d-flex justify-content-around" style="flex-direction-column">
                    <div>
                        <ul style="font-size:16px">
                            <p><li>Urinate (pee) a lot, often at night</li></p>
                            <p><li>Lose weight without trying</li></p>
                            <p><li>Have sores that heal slowly</li></p>
                        </ul>
                    </div>
                    <div class="mx-2">
                        <ul style="font-size:16px">
                            <p><li>Have numb or tingling hands or feet</li></p>
                            <p><li>Have blurry vision</li></p>
                            <p><li>Are very hungry</li></p>
                        </ul>
                    </div>
                </div>
                <div class="my-4" style="color: #E8E8E8">
                    <h3>Symptoms of Type 1 Diabetes</h3>
                    <p style="margin-top:2rem">People who have type 1 diabetes may also have nausea, vomiting, or stomach pains.<br>
                        Type 1 diabetes symptoms can develop in just a few weeks or months and can be severe.<br>
                        Type 1 diabetes usually starts when you’re a child, teen, or young adult but can happen at any age.
                    </p>
                </div>
                <div class="my-4" style="color: #E8E8E8">
                    <h3>Symptoms of Type 2 Diabetes</h3>
                    <p style="margin-top:2rem">If you have type 2 diabetes, cells don’t respond normally to insulin; this is called insulin<br> 
                        resistance. Your pancreas makes more insulin to try to get cells to respond. Eventually your <br>
                        pancreas can’t keep up, and your blood sugar rises, setting the stage for prediabetes and type 2 diabetes
                    </p>
                </div>
                
            </div>

        </div>
    </div>
       
</div>
<div style="text-align:center" id="msg">

</div>
<hr> 
<div style="color:white; text-align:center">
    <h3> SUGGESTIONS  </h3>
    {% for sugdata in data %}
    <div>
        {% if sugdata.properties.country is None %}
        <p>country : unavailable</p>
        {% else %}
        <p>country : {{sugdata.properties.country}}</p>
        {% endif %}
        
        {% if sugdata.properties.city is None %}
        <p>city : unavailable</p>
        {% else %}
        <p>city : {{sugdata.properties.city}}</p>
        {% endif %}
    </div>

    {% endfor %}
</div>

<style>
    body{
        background-color:#040720;
    }

    hr{
        color:white;
        height:5px
    }

    .text_underline{
        text-decoration:underline;
        text-decoration-color:#177245;
        text-decoration-style: solid;
        text-decoration-thickness: 5px;
        text-underline-offset: 0.9em
      }

    .table-list {
        font-family: sans-serif;
        margin-inline: auto;
        margin-top: 1.2rem;
        text-align: left;
        border-collapse: collapse;
        border: none;
      }
      .table-list td,
      .table-list th {
        padding: 1.15em 1.5rem;
        position: relative;
        transition: font-size 0.1s, padding 0.1s;
      }
      @media (max-width: 1299px) {
        .table-list td,
      .table-list th {
          font-size: 13.6px;
          padding: 0.75rem 0.6818181818rem;
        }
      }
      .table-list td.align-right,
      .table-list th.align-right {
        text-align: right;
      }
      .table-list td.align-center,
      .table-list th.align-center {
        text-align: center;
      }
      .table-list thead.sticky-thead {
        position: sticky;
        inset-block-start: 0;
        z-index: 2;
        background-color: white;
        box-shadow: 0 2px 0 0 gray;
      }
      .table-list thead.sticky-thead th {
        box-shadow: 0 2px 0 0 gray;
      }
      @media only screen and (max-width:768px){
          .hide{
            display:none;
            }
        }
</style>

<script>
    function generationFunc()
    {
        document.getElementById("msg").innerHTML="document is being downloaded"; 
    }

</script>
{% else %}
<div class="container">
    <div class="row">
        <center class="my-4">
            <div class="col-lg-5">
                <img style="width:80%; height:80%" src="../static/photos/meme_face.png" alt="meme_face">
            </div>
            <div class="col-lg-7 my-4" >
                <h3>Haah!!! You thought. I see you there</h3>
                <div style="margin-top:3rem">
                    Authenticate yourself if you wan't to access this page
                </div>
                <div style="margin-top:3rem; ">
                    <a href="{% url 'login' %}" style="background-color: #9B5DE5; width: 145px;" class="btn px-4 py-3 mt-4 my-4 text-white d-flex  align-items-center justify-content-between">
                        <span style="text-align:center">Login please</span>
                        
                    </a>
                </div>
            </div>
        </center>
        
    </div>
  </div>
  <style>
      body{
          background-color:#29AB87;
      }
  </style>
    <div class="content-section">
        <form method="POST">
            {% csrf_token %}
           <h3>Permission Denied !! register or Login first</h3>
            <div class="form-group my-3">
                <button  class="btn btn-outline-info" type="submit"><a class="ml-2"  href="{% url 'register' %}">Sign Up<a/></button>
            </div>
        </form>
        <div class="border-top pt-3">
            <small class="text-muted">
                Already Have An Account? <a class="ml-2" href="{% url 'login' %}">Sign In</a>
            </small>
        </div>
    </div>
  </div>
  {% endif %}
{% endblock content %}
